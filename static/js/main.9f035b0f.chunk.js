(this["webpackJsonpspotify-lyrics-viewer-client"]=this["webpackJsonpspotify-lyrics-viewer-client"]||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(10),a=n.n(r),o=n(14),c=n(161),l=n(162),s=n(164),u=n(153),d=n(21),j=n(66),b={api:{root:"https://spotify-lyrics-viewer.onrender.com",spotify_authentication_route:"/api/spotify/authenticate"},siteUrl:"https://spotify-lyrics-viewer.nitratine.net",client:{basename:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ROOT:"https://spotify-lyrics-viewer.onrender.com",REACT_APP_TRACK_CHECK_DELAY_SECONDS:"5",REACT_APP_GOOGLE_ANALYTICS_TRACKING_ID:"G-GHCZ0LMQWH"}).REACT_APP_BASENAME,trackCheckDelaySeconds:function(){var e=null!=="5"?"5":"";if(""===e)return 1;var t=parseInt(e);return isNaN(t)?1:Math.max(t,1)}()}};var g,p=n(67),h=n.n(p),f=n.p+"static/media/banner.c8f2c7de.png",y=n(2),m=function(e){var t=e.titlePrefix,n=e.description,i=e.route,r=e.children,a=(null!==t&&void 0!==t?t:"")+"Spotify Lyrics Viewer";return h()({title:a,description:n,charset:"utf-8",lang:"en",links:[{rel:"canonical",href:b.siteUrl+i},{rel:"icon",type:"image/ico",href:"/favicon.ico"},{rel:"apple-touch-icon",type:"image/png",href:"/logo.png"}],openGraph:{title:a,image:b.siteUrl+f,site_name:"Spotify Lyrics Viewer"}}),Object(y.jsx)(y.Fragment,{children:r})},O=n(27),v=n(150),x=n(151),S=n(154),A=n(155),w=n(88),k=n(156),P=n(165),C=n(157),T=n(75),N=n.n(T),E=n(74),_=n.n(E),L=n(73),I=n.n(L),R=n(72),W=n.n(R),B=n.p+"static/media/banner-dark.928b88b7.png",D=n.p+"static/media/logo.175a6cf7.png",M={"/":"Home","/about":"About"},U=Object(C.a)((function(e){return{appBar:{backgroundColor:e.palette.background.paper},toolbar:{padding:0},logo:{cursor:"pointer"},link:{textDecoration:"none",color:e.palette.text.secondary,"&:hover":{color:e.palette.text.primary,textDecoration:"none"}},activeLink:{color:e.palette.text.primary},userIcon:{width:30,height:30},grow:{flexGrow:1}}})),z=function(e){var t,n=e.user,i=e.onLogout,r=e.onThemeToggle,a=e.isDarkMode,o=U(),c=Object(d.usePath)(),l=Object(O.a)(),j=Object(v.a)(l.breakpoints.up("sm")),b=function(e){return function(t){t.preventDefault(),Object(d.navigate)(e)}};return Object(y.jsx)(x.a,{position:"static",className:o.appBar,children:Object(y.jsx)(u.a,{maxWidth:"md",children:Object(y.jsxs)(S.a,{className:o.toolbar,children:[Object(y.jsx)(A.a,{href:"/",onClick:b("/"),children:j?Object(y.jsx)("img",{src:a?B:f,height:"30",alt:"Spotify Lyrics Viewer Banner",className:o.logo}):Object(y.jsx)("img",{src:D,height:"30",alt:"Spotify Lyrics Viewer Logo",className:o.logo})}),Object.keys(M).map((function(e){return Object(y.jsx)(s.a,{display:"inline",ml:2,children:Object(y.jsx)(A.a,{href:e,onClick:b(e),className:"".concat(o.link," ").concat(c===e?o.activeLink:""),children:Object(y.jsx)(w.a,{variant:"body1",children:M[e]})})},e)})),Object(y.jsx)("div",{className:o.grow}),Object(y.jsx)(A.a,{href:"https://github.com/brentvollebregt/spotify-lyrics-viewer",children:Object(y.jsx)(k.a,{children:Object(y.jsx)(W.a,{})})}),Object(y.jsx)(k.a,{onClick:r,children:a?Object(y.jsx)(I.a,{}):Object(y.jsx)(_.a,{})}),Object(y.jsx)(k.a,{onClick:function(){null===n?Object(d.navigate)("/spotify-authorization"):window.confirm("Are you sure you want to logout?")&&i()},children:null!==n?Object(y.jsx)(P.a,{alt:n.display_name+" Logo",src:void 0!==n.images&&n.images.length>0?n.images[0].url:void 0,className:o.userIcon,children:null===(t=n.display_name)||void 0===t?void 0:t.substring(0,1)}):Object(y.jsx)(N.a,{})})]})})})},F=n(32),V=n(166),G=n(77),H=n.n(G),K=n(78),Y=n.n(K),J=n(79),Q=n.n(J),Z=n(76),$=n.n(Z),q=n(23),X=n.n(q),ee=n(25),te=function(e,t){var n=ee.a.error(JSON.parse(t.responseText).error.message,{position:"bottom-center",heading:e,hideAfter:20,onClick:function(){return void 0!==n&&n()}}).hide},ne=function(e){var t=Math.floor(e/1e3),n=Math.floor(t/60),i=t%60;return"".concat(n,":").concat(i.toString().padStart(2,"0"))},ie=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500,c=Object(i.useState)(0),l=Object(o.a)(c,2),s=l[0],u=l[1],d=Object(i.useState)(!1),j=Object(o.a)(d,2),b=j[0],g=j[1],p=Object(i.useState)(null),h=Object(o.a)(p,2),f=h[0],y=h[1];Object(i.useEffect)((function(){b||u(e)}),[b,e]),Object(i.useEffect)((function(){return null!==f&&clearTimeout(f),y(setInterval((function(){!b&&n&&u((function(e){return Math.min(e+a,t)}))}),a)),function(){null!==f&&clearTimeout(f)}}),[b,n,t]);var m=function(e,t){var n=Array.isArray(t)?t[0]:t;if(u(n),g(!1),null!==r){var i=new X.a;i.setAccessToken(r.value),i.seek(s).catch((function(e){return te("Failed to Seek",e)}))}},O=function(e,t){g(!0),u(Array.isArray(t)?t[0]:t)};return{onUserFinishedSliding:m,onUserSlide:O,progress:s}},re=n.p+"static/media/spotify-logo-round.7000afed.png",ae=Object(C.a)((function(e){var t;return{appBar:{backgroundColor:e.palette.background.paper,top:"auto",bottom:0,background:"#f8f9fa",paddingTop:6,paddingBottom:6},playerWrapper:Object(F.a)({display:"grid",gridTemplateColumns:"auto auto 1fr",gridColumnGap:16},e.breakpoints.down("xs"),{gridTemplateColumns:"auto auto"}),songWrapper:{display:"inline-grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"1fr 1fr",gridColumnGap:5,maxWidth:250},songAlbumArtWrapper:{gridColumnStart:1,gridColumnEnd:2,gridRowStart:1,gridRowEnd:3},songAlbumArt:{height:40,width:40},songDetail:{color:e.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},timeControl:{color:e.palette.text.primary,whiteSpace:"nowrap",textOverflow:"ellipsis"},controlsWrapper:{display:"inline-grid",gridTemplateColumns:"auto auto auto",alignItems:"center",justifyContent:"center"},control:{color:e.palette.text.primary,cursor:"pointer"},sliderWrapper:Object(F.a)({},e.breakpoints.down("xs"),{gridColumnStart:1,gridColumnEnd:3}),slider:(t={},Object(F.a)(t,e.breakpoints.down("xs"),{padding:"10px 0"}),Object(F.a)(t,"marginLeft",10),Object(F.a)(t,"marginRight",10),t)}})),oe=function(e){var t,n,i,r,a,o,c,l,d,j,b,g,p,h,f,m,O,v=e.currentlyPlayingSong,S=e.token,A=ae(),w=null===(t=v.currentlyPlayingObject)||void 0===t||null===(n=t.item)||void 0===n?void 0:n.album.images[0].url,k=null!==(i=null===(r=v.currentlyPlayingObject)||void 0===r||null===(a=r.item)||void 0===a?void 0:a.name)&&void 0!==i?i:"---",P=null!==(o=null===(c=v.currentlyPlayingObject)||void 0===c||null===(l=c.item)||void 0===l?void 0:l.artists.map((function(e){return e.name})).join(", "))&&void 0!==o?o:"---",C=null!==(d=null===(j=v.currentlyPlayingObject)||void 0===j||null===(b=j.item)||void 0===b?void 0:b.duration_ms)&&void 0!==d?d:0,T=null!==(g=null===(p=v.currentlyPlayingObject)||void 0===p?void 0:p.progress_ms)&&void 0!==g?g:0,N=null!==(h=null===(f=v.currentlyPlayingObject)||void 0===f?void 0:f.is_playing)&&void 0!==h&&h;"ad"===(null===v||void 0===v||null===(m=v.currentlyPlayingObject)||void 0===m?void 0:m.currently_playing_type)&&(w=re,k="Advertisement",P="Spotify",C=Math.max(T,3e4));var E=ie(T,C,N,S),_=E.onUserFinishedSliding,L=E.onUserSlide,I=E.progress,R=function(){if(S){var e=new X.a;e.setAccessToken(S.value),N?e.pause().catch((function(e){return te("Failed to Pause",e)})):e.play().catch((function(e){return te("Failed to Play",e)}))}};return Object(y.jsx)(x.a,{position:"static",color:"primary",className:A.appBar,children:Object(y.jsx)(u.a,{maxWidth:"md",children:Object(y.jsxs)("div",{className:A.playerWrapper,children:[Object(y.jsxs)("div",{className:A.songWrapper,children:[Object(y.jsx)("div",{className:A.songAlbumArtWrapper,children:Object(y.jsx)("img",{src:null!==(O=w)&&void 0!==O?O:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mO8+x8AAr8B3gzOjaQAAAAASUVORK5CYII=",className:A.songAlbumArt,alt:"Album art for current song"})}),Object(y.jsx)("div",{className:A.songDetail,title:k,children:k}),Object(y.jsx)("div",{className:A.songDetail,title:P,children:P})]}),Object(y.jsxs)("div",{className:A.controlsWrapper,children:[Object(y.jsx)($.a,{fontSize:"large",className:A.control,onClick:function(){if(S){var e=new X.a;e.setAccessToken(S.value),e.skipToPrevious().catch((function(e){return te("Failed to Skip to Previous Song",e)}))}}}),N?Object(y.jsx)(H.a,{fontSize:"large",htmlColor:"black",onClick:R,className:A.control}):Object(y.jsx)(Y.a,{fontSize:"large",htmlColor:"black",onClick:R,className:A.control}),Object(y.jsx)(Q.a,{fontSize:"large",className:A.control,onClick:function(){if(S){var e=new X.a;e.setAccessToken(S.value),e.skipToNext().catch((function(e){te("Failed to Skip to Next Song",e)}))}}})]}),Object(y.jsxs)(s.a,{display:"inline-flex",alignItems:"center",className:A.sliderWrapper,children:[Object(y.jsx)("span",{className:A.timeControl,children:ne(I)}),Object(y.jsx)(V.a,{valueLabelDisplay:"off",value:I,min:0,max:C,onChangeCommitted:_,onChange:L,className:A.slider}),Object(y.jsx)("span",{className:A.timeControl,children:ne(C)})]})]})})})};!function(e){e[e.Playing=0]="Playing",e[e.NotPlaying=1]="NotPlaying",e[e.Loading=2]="Loading",e[e.Error=3]="Error",e[e.Paused=4]="Paused"}(g||(g={}));var ce=function(e,t){var n=Object(i.useState)({state:g.Loading,currentlyPlayingObject:null}),r=Object(o.a)(n,2),a=r[0],c=r[1],l=Object(i.useState)(null),s=Object(o.a)(l,2),u=s[0],d=s[1],j=function(e){var n=new X.a;n.setAccessToken(e),n.getMyCurrentPlayingTrack().then((function(e){if(""===e)c({state:g.NotPlaying,currentlyPlayingObject:null});else{var t=e.is_playing?g.Playing:g.Paused;c({state:t,currentlyPlayingObject:e})}})).catch((function(e){if(401===e.status){t();var n=ee.a.info("You have been logged out",{position:"bottom-center",heading:"Token expired",hideAfter:20,onClick:function(){return void 0!==n&&n()}}).hide}else{c({state:g.Error,currentlyPlayingObject:null});var i=ee.a.error(e.responseText,{position:"bottom-center",heading:"Failed to Get Current Song",hideAfter:20,onClick:function(){return void 0!==i&&i()}}).hide}}))};return Object(i.useEffect)((function(){null!==e?j(e.value):c({state:g.Loading,currentlyPlayingObject:null})}),[e]),Object(i.useEffect)((function(){if(null!==u&&clearTimeout(u),(a.state===g.Playing||a.state===g.Paused)&&null!==a.currentlyPlayingObject.item){var t=a.currentlyPlayingObject.item.duration_ms-(null===a.currentlyPlayingObject.progress_ms?0:a.currentlyPlayingObject.progress_ms)+500;d(setTimeout((function(){null!==e&&j(e.value)}),t))}return function(){null!==u&&clearTimeout(u)}}),[a]),Object(i.useEffect)((function(){var t=setInterval((function(){null!==e&&j(e.value)}),1e3*b.client.trackCheckDelaySeconds);return function(){return clearTimeout(t)}}),[e]),a},le=n(57),se=n.n(le),ue=n(80),de={},je=function(e){var t=Object(i.useState)(void 0),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(i.useEffect)((function(){if(e.state!==g.Playing&&e.state!==g.Paused||null===e.currentlyPlayingObject.item)a(void 0);else{var t,n,i,o=e.currentlyPlayingObject.item.id!==(null===r||void 0===r?void 0:r.currentlyPlayingItemId),c=void 0===(null===r||void 0===r||null===(t=r.lyrics)||void 0===t?void 0:t.plainLyrics)&&void 0===(null!==(n=null===r||void 0===r||null===(i=r.lyrics)||void 0===i?void 0:i.syncedLyrics)&&void 0!==n?n:void 0);if(void 0===r||o||c){var l;c||a(void 0);var s=e.currentlyPlayingObject.item.name.replace(/ \(feat.+\)/i,"").replace(/ \(ft.+\)/i,"").replace(/ \(with.+\)/i,"").replace(/ - \d{4} - Remaster/i,"").replace(/ - (\d{4} )?Remaster(ed)?.*/i,"").replace(/ - Original Album Version/i,"").replace(/ \(Live\)/i,"").replace(/ - Acoustic/i,"").replace(/ - from .*/i,"").replace(/ - Live from .*/i,"").replace(/ - Live/i,"").replace(/ - \d{4} Mix/i,"").trim(),u=JSON.stringify({artists:e.currentlyPlayingObject.item.artists.map((function(e){return e.name})),title:s,album:e.currentlyPlayingObject.item.album.name}),d=null!==(l=de[u])&&void 0!==l?l:function(e,t,n,i){var r=new URLSearchParams;r.append("title",t);var a,o=Object(j.a)(e);try{for(o.s();!(a=o.n()).done;){var c=a.value;r.append("artists",c)}}catch(l){o.e(l)}finally{o.f()}return r.append("albumName",n),r.append("duration",i.toString()),fetch("".concat(b.api.root,"/api/lyrics?").concat(r)).then((function(e){return 200===e.status?e.json():null}))}(e.currentlyPlayingObject.item.artists.map((function(e){return e.name})),s,e.currentlyPlayingObject.item.album.name,e.currentlyPlayingObject.item.duration_ms);de[u]=d;var p=!1;return function(){var t=Object(ue.a)(se.a.mark((function t(){var n;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d;case 2:if(n=t.sent,!p){t.next=5;break}return t.abrupt("return");case 5:null!==e.currentlyPlayingObject.item&&a({currentlyPlayingItemId:e.currentlyPlayingObject.item.id,lyrics:null!==n&&void 0!==n?n:void 0});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){p=!0}}}}),[e]),r},be=n(58),ge=n.n(be),pe=n(86),he="dark-theme",fe=function(e){return e?Object(pe.a)({palette:{type:"dark",primary:{main:ge.a[500]}}}):Object(pe.a)({palette:{type:"light",primary:{main:ge.a[800]}}})},ye=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(i.useMemo)((function(){return fe(n)}),[n]);Object(i.useEffect)((function(){var e=localStorage.getItem(he);r(null!==e)}),[]);return{theme:a,toggleTheme:function(){return r((function(e){var t=!e;return t?localStorage.setItem(he,"enabled"):localStorage.removeItem(he),t}))},darkModeEnabled:n}},me=function(e,t,n){var r=Object(i.useState)(null),a=Object(o.a)(r,2),c=a[0],l=a[1];Object(i.useEffect)((function(){if(null!==c&&clearTimeout(c),null!==e){var i=e.expiry.getTime()-(new Date).getTime()-6e4;l(setTimeout((function(){fetch("".concat(b.api.root,"/api/spotify/refresh-token"),{credentials:"include"}).then((function(e){return 200===e.status?e.json():null})).then((function(e){if(null!==e)t(e.access_token,e.expires_at);else{var i=ee.a.warn("Unable to keep logged into Spotify. Please log back in.",{position:"bottom-center",heading:"Spotify Login Expired",hideAfter:20,onClick:function(){return void 0!==i&&i()}}).hide;n()}}))}),i))}return function(){null!==c&&clearTimeout(c)}}),[e])},Oe=function(e,t){var n=Object(i.useState)(null),r=Object(o.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){if(null===e)c(null);else{var t=new X.a;t.setAccessToken(e.value),t.getMe().then((function(e){return c(e)})).catch((function(e){console.error(e);var t=ee.a.error("Could not get your profile. Make sure you are connected to the internet and that cookies are allowed.",{position:"bottom-center",heading:"Error When Fetching Your Profile",hideAfter:20,onClick:function(){return void 0!==t&&t()}}).hide}))}}),[e]),a},ve=function(){return Object(y.jsxs)("div",{style:{maxWidth:600,margin:"auto"},children:[Object(y.jsx)(w.a,{variant:"h4",align:"center",gutterBottom:!0,children:"About"}),Object(y.jsx)(w.a,{gutterBottom:!0,children:"Spotify Lyrics Viewer is a tool that allows you to view the lyrics of the current playing song on Spotify."}),Object(y.jsxs)(w.a,{gutterBottom:!0,children:["To do this, we first log you into Spotify so we can see the current song playing. The title and artist are then used to try and find the lyrics on"," ",Object(y.jsx)(A.a,{href:"https://genius.com/",children:"GENIUS"})," and whatever lyrics matched the best are displayed to you."]}),Object(y.jsx)(w.a,{gutterBottom:!0,children:"Please note that the lyrics returned may not be for the current playing song in some situations due the the lyrics not existing on GENIUS or the fact that the current playing songs title has some extra content to it aside from the actual title."}),Object(y.jsx)(s.a,{mt:3,children:Object(y.jsxs)(w.a,{align:"center",children:[Object(y.jsx)(A.a,{href:"https://github.com/brentvollebregt/spotify-lyrics-viewer",children:"Source"})," \u2022 ",Object(y.jsx)(A.a,{href:"https://github.com/brentvollebregt",children:"Brent Vollebregt"})," \u2022 ",Object(y.jsx)(A.a,{href:"https://nitratine.net/",children:"Nitratine.net"})]})})]})},xe=function(){return Object(y.jsx)(s.a,{textAlign:"center",children:Object(y.jsx)(w.a,{variant:"h4",gutterBottom:!0,children:"Waiting for an ad"})})},Se=function(){return Object(y.jsxs)(s.a,{textAlign:"center",children:[Object(y.jsx)(w.a,{variant:"h4",gutterBottom:!0,children:"Error"}),Object(y.jsx)(w.a,{children:"An unexpected error ocurred"})]})},Ae=n(158),we=function(){return Object(y.jsxs)(s.a,{textAlign:"center",children:[Object(y.jsx)(w.a,{variant:"h4",gutterBottom:!0,children:"Loading..."}),Object(y.jsx)(w.a,{gutterBottom:!0,children:"To get access to your current playing song, you need to sign into Spotify."}),Object(y.jsx)(Ae.a,{size:30})]})},ke=function(){return Object(y.jsxs)(s.a,{textAlign:"center",children:[Object(y.jsx)(w.a,{variant:"h4",gutterBottom:!0,children:"No Song is Playing"}),Object(y.jsxs)(w.a,{children:["A song must be playing on Spotify for lyrics to be displayed.",Object(y.jsx)("br",{}),"Also make sure you are not using a private session."]})]})},Pe=n(163),Ce=n(159),Te=n(82),Ne=n.n(Te),Ee=n(83),_e=n.n(Ee),Le=n(84),Ie=n.n(Le),Re=n(85),We=n.n(Re),Be=n(81),De=n.n(Be),Me=(n(120),function(e,t,n,i){var r,a,o,c=t/1e3;if(null===e.syncedLyrics||!n||i)return{before:"",highlighted:"",after:null!==(o=e.plainLyrics)&&void 0!==o?o:""};var l=null!==(r=e.syncedLyrics.filter((function(e){return e.timestamp<=c})))&&void 0!==r?r:[],s=l.slice(0,-1),u=l.length>0?l[l.length-1]:null,d=e.syncedLyrics.filter((function(e){return e.timestamp>c}));return{before:s.map((function(e){return e.content})).join(" \n "),highlighted:null!==(a=null===u||void 0===u?void 0:u.content)&&void 0!==a?a:"",after:d.map((function(e){return e.content})).join(" \n ")}}),Ue=Object(C.a)((function(e){return{lyrics:{whiteSpace:"pre-wrap"},highlightedLyricsWrapper:{marginTop:20,marginBottom:20},highlightedLyrics:Object(F.a)({padding:"0.1em 0",whiteSpace:"pre-wrap",fontWeight:"bolder",fontSize:"5em"},e.breakpoints.down("xs"),{fontSize:"3em"}),root:{margin:"auto",maxWidth:700,position:"relative",textAlign:"center"},toolbar:{padding:0,margin:"-6px -6px 0 0",position:"fixed",right:60,top:75}}})),ze=function(e){var t=e.lyricsDetails,n=e.progressMs,r=e.paused,a=Ue(),c=Object(i.useRef)(null),l=Object(i.useRef)(null),u=Object(i.useRef)(null),d=Object(i.useState)(""),j=Object(o.a)(d,2),b=j[0],g=j[1],p=Object(i.useState)(!1),h=Object(o.a)(p,2),f=h[0],m=h[1],O=Object(i.useState)(!0),v=Object(o.a)(O,2),x=v[0],P=v[1],C=ie(n,1/0,!r,null,250).progress,T=null!==t.syncedLyrics;Object(i.useEffect)((function(){if(null!==c.current){var e=new De.a(c.current);e.unmark(),""!==b&&e.mark(b)}}),[b,t]),Object(i.useEffect)((function(){f&&null!==l.current&&l.current.focus()}),[f]),Object(i.useEffect)((function(){var e=u.current;x&&null!==e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),[x,C]);var N=Object(i.useMemo)((function(){return Me(t,C,x,r)}),[t,C,x,r]),E=function(){return m((function(e){return!e}))};return Object(y.jsxs)("div",{className:a.root,children:[Object(y.jsxs)(S.a,{className:a.toolbar,children:[f?Object(y.jsx)(s.a,{mb:1,children:Object(y.jsx)(Pe.a,{variant:"outlined",value:b,onChange:function(e){var t;return g(null!==(t=e.currentTarget.value)&&void 0!==t?t:"")},InputProps:{endAdornment:Object(y.jsx)(Ce.a,{position:"end",children:Object(y.jsx)(k.a,{onClick:E,edge:"end",children:Object(y.jsx)(Ne.a,{})})})},label:"Search",placeholder:"Search lyrics you heard to find your position...",style:{width:"100%",maxWidth:600}})}):Object(y.jsx)(k.a,{onClick:E,children:Object(y.jsx)(_e.a,{fontSize:"small"})}),Object(y.jsx)(k.a,{onClick:function(){return P((function(e){return!e}))},disabled:!T,children:x?Object(y.jsx)(Ie.a,{}):Object(y.jsx)(We.a,{})})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)(w.a,{component:"div",className:a.lyrics,ref:c,id:"lyrics-main",children:[Object(y.jsx)("span",{id:"lyrics-passed",children:N.before}),""!==N.highlighted&&Object(y.jsx)("div",{className:a.highlightedLyricsWrapper,children:Object(y.jsx)("span",{className:a.highlightedLyrics,ref:u,id:"lyrics-current",children:N.highlighted})}),Object(y.jsx)("span",{id:"lyrics-upcoming",children:N.after})]}),Object(y.jsx)(s.a,{mt:2,textAlign:"left",children:Object(y.jsx)(w.a,{id:"lyrics-provider",children:Object(y.jsxs)(A.a,{href:t.attribution,children:["Lyrics for ",t.title," by ",t.artist]})})})]})]})},Fe=function(e){var t,n,i,r,a,o,c,l=e.lyricDetails,u=e.currentlyPlayingSong;return void 0===l?Object(y.jsx)(s.a,{textAlign:"center",children:Object(y.jsx)(Ae.a,{size:30})}):void 0===l.lyrics?Object(y.jsx)(s.a,{textAlign:"center",children:Object(y.jsx)(w.a,{children:"No lyrics found for the current track."})}):void 0===(null===l||void 0===l||null===(t=l.lyrics)||void 0===t?void 0:t.plainLyrics)&&void 0===(null!==(n=null===l||void 0===l||null===(i=l.lyrics)||void 0===i?void 0:i.syncedLyrics)&&void 0!==n?n:void 0)?Object(y.jsxs)(s.a,{textAlign:"center",children:[Object(y.jsx)(w.a,{children:"No lyrics found. Trying again."}),Object(y.jsx)(s.a,{mt:1,children:Object(y.jsx)(Ae.a,{size:30})})]}):Object(y.jsx)(ze,{lyricsDetails:l.lyrics,progressMs:null!==(r=null===u||void 0===u||null===(a=u.currentlyPlayingObject)||void 0===a?void 0:a.progress_ms)&&void 0!==r?r:0,paused:null!==(o=!(null===u||void 0===u||null===(c=u.currentlyPlayingObject)||void 0===c?void 0:c.is_playing))&&void 0!==o&&o})},Ve=n(160),Ge=function(){return Object(y.jsxs)(s.a,{textAlign:"center",children:[Object(y.jsx)(w.a,{variant:"h4",gutterBottom:!0,children:"Spotify Lyrics Viewer"}),Object(y.jsx)(w.a,{gutterBottom:!0,children:"To get access to your current playing song, you need to sign into Spotify."}),Object(y.jsx)(Ve.a,{variant:"outlined",color:"primary",onClick:function(){Object(d.navigate)("/spotify-authorization")},startIcon:Object(y.jsx)(P.a,{src:re,alt:"Spotify Logo Round",style:{width:20,height:20}}),children:"Sign In With Spotify"})]})},He=function(e){var t=e.user,n=e.currentlyPlayingSong,i=e.lyrics;return null===t?Object(y.jsx)(Ge,{}):n.state===g.Loading?Object(y.jsx)(we,{}):n.state===g.NotPlaying?Object(y.jsx)(ke,{}):n.state===g.Error?Object(y.jsx)(Se,{}):"ad"===n.currentlyPlayingObject.currently_playing_type?Object(y.jsx)(xe,{}):Object(y.jsx)(Fe,{lyricDetails:i,currentlyPlayingSong:n})},Ke=function(){return Object(y.jsx)(w.a,{variant:"h4",align:"center",children:"Page Not Found"})},Ye=function(e){var t=e.onNewToken,n=window.location.search,i=Object(y.jsx)(y.Fragment,{});if(""===n)window.location.href=b.api.root+b.api.spotify_authentication_route,i=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(s.a,{mb:2,children:Object(y.jsx)(w.a,{variant:"subtitle1",children:"Redirecting"})}),Object(y.jsx)(Ae.a,{size:30})]});else{var r=new URLSearchParams(n.substr(1)),a=r.get("access_token"),o=r.get("expires_at");null!==a&&null!==o?(t(a,parseInt(o,10)),Object(d.navigate)("/"),i=Object(y.jsx)(w.a,{variant:"subtitle1",children:"Token received"})):i=Object(y.jsx)(w.a,{variant:"subtitle1",children:"Incorrect URL parameters"})}return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w.a,{variant:"h4",align:"center",children:"Spotify Authorization"}),Object(y.jsx)(s.a,{alignItems:"center",textAlign:"center",children:i})]})},Je=function(){var e=Object(i.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=function(e,t){r({expiry:new Date(t),value:e})},j=function(){r(null),fetch("".concat(b.api.root,"/api/session"),{credentials:"include",method:"DELETE"})};void 0!==b.client.basename&&Object(d.setBasepath)(b.client.basename);var g=Oe(n,j);me(n,a,j);var p=ce(n,j),h=je(p),f=ye(),O=f.theme,v=f.toggleTheme,x=f.darkModeEnabled;Object(i.useEffect)((function(){fetch("".concat(b.api.root,"/api/spotify/token"),{credentials:"include"}).then((function(e){return 200===e.status?e.json():null})).then((function(e){null!==e&&a(e.access_token,e.expires_at)}))}),[]);var S={"/":function(){return Object(y.jsx)(m,{route:"/",description:"View the lyrics of the current song playing on your Spotify account in your browser.",children:Object(y.jsx)(He,{user:g,currentlyPlayingSong:p,lyrics:h})})},"/about":function(){return Object(y.jsx)(m,{route:"/about",titlePrefix:"About - ",description:"Spotify Lyrics Viewer is a tool that allows you to view the lyrics of the current playing song on Spotify.",children:Object(y.jsx)(ve,{})})},"/spotify-authorization":function(){return Object(y.jsx)(Ye,{onNewToken:a})},"/spotify-authorization/":function(){return Object(y.jsx)(Ye,{onNewToken:a})}},A=Object(d.useRoutes)(S);return Object(d.useRedirect)("/about/","/about"),Object(y.jsxs)(c.a,{theme:O,children:[Object(y.jsx)(l.a,{}),Object(y.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},children:[Object(y.jsx)(z,{user:g,onLogout:j,onThemeToggle:v,isDarkMode:x}),Object(y.jsx)(s.a,{py:3,style:{overflow:"auto"},children:Object(y.jsx)(u.a,{maxWidth:"md",children:null!==A&&void 0!==A?A:Object(y.jsx)(Ke,{})})}),Object(y.jsx)(oe,{currentlyPlayingSong:p,token:n})]})]})};n(121),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(y.jsx)(Je,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[122,1,2]]]);
//# sourceMappingURL=main.9f035b0f.chunk.js.map